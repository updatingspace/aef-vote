# Root env template for Portal stack.
# ID service is externalized and integrated either via local GHCR images
# or a deployed remote instance.

DJANGO_DEBUG=True
DJANGO_ALLOWED_HOSTS=*
DJANGO_LOG_LEVEL=INFO

# ID integration mode for scripts/dev-up.sh
# local  -> uses infra/docker-compose/docker-compose.dev.yml
# remote -> uses infra/docker-compose/docker-compose.remote.yml
ID_MODE=local

# Internal trust (BFF -> services)
BFF_INTERNAL_HMAC_SECRET=dev-internal-hmac

# BFF tenant/dev settings
BFF_TENANT_HOST_SUFFIX=localhost
BFF_DEV_AUTO_TENANT=true
BFF_COOKIE_DOMAIN=.aef.localhost
ID_PUBLIC_BASE_URL=http://id.localhost

# Upstream URLs (BFF -> services)
ID_BASE_URL=http://updspaceid:8001/api/v1
BFF_UPSTREAM_ID_URL=http://updspaceid:8001/api/v1
ACCESS_BASE_URL=http://localhost:8002/api/v1
BFF_UPSTREAM_PORTAL_URL=http://localhost:8003/api/v1
BFF_UPSTREAM_VOTING_URL=http://localhost:8004/api/v1
BFF_UPSTREAM_EVENTS_URL=http://localhost:8005/api/v1
BFF_UPSTREAM_FEED_URL=http://localhost:8006/api/v1

# OIDC client for Portal in ID service (required in remote mode)
BFF_OIDC_CLIENT_ID=portal-dev-client
BFF_OIDC_CLIENT_SECRET=portal-dev-secret

# Local ID images (used in local mode)
ID_SERVICE_IMAGE=ghcr.io/updatingspace/id-service
ID_FRONTEND_IMAGE=ghcr.io/updatingspace/id-frontend
ID_IMAGE_TAG=latest

# Frontend
VITE_DEV_PROXY_TARGET=http://localhost:8080
VITE_BFF_BASE_URL=/api/v1
VITE_API_BASE_URL=/api/v1
VITE_ID_LOGIN_URL=http://id.localhost
VITE_TENANT_HINT=aef
